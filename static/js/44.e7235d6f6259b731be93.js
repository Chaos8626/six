webpackJsonp([44],{"1mpY":function(e,t,n){t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.myView[data-v-be21bc90] {\n  margin-top: 1.333333rem;\n}\n.actions[data-v-be21bc90] {\n  height: 1.333333rem;\n  background: #fff;\n  position: fixed;\n  bottom: 0;\n}\nbutton[data-v-be21bc90] {\n  height: 14vw;\n  -webkit-box-flex: 1;\n  -webkit-flex: auto;\n          flex: auto;\n  color: #ffffff;\n  font-size: 0.453333rem;\n  font-weight: 400;\n  border: none;\n  outline: none;\n  margin-left: 0;\n}\n.tips[data-v-be21bc90] {\n  padding: 0 0.426667rem;\n  color: #afafaf;\n}\n.divBotPad[data-v-be21bc90] {\n  padding-bottom: 1.6rem;\n}\n.bold[data-v-be21bc90] {\n  font-weight: bold;\n}\n.listDiv[data-v-be21bc90] {\n  padding-top: 1.333333rem;\n  padding-bottom: 0.213333rem;\n}\n.group[data-v-be21bc90] {\n  margin-top: 0.213333rem;\n}\n.content[data-v-be21bc90] {\n  font-size: 0.426667rem;\n  display: -webkit-box;\n  overflow: hidden;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 3;\n  text-overflow: ellipsis;\n  word-break: break-all;\n}\n\n/*  .status{\n    color: red;\n  }\n  .level{\n    color: red;\n  }\n  .credit{\n    color: red;\n  }*/\n.opts[data-v-be21bc90] {\n  padding: 0.266667rem 0.426667rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n  -webkit-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n.optBtn[data-v-be21bc90] {\n  padding: 0.266667rem 0.266667rem;\n  border: solid 0.026667rem #0354A6;\n  text-align: center;\n  font-size: 0.373333rem;\n  color: #0354A6;\n  margin-left: 0.266667rem;\n}",""])},DZKb:function(e,t,n){var i=n("1mpY");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("rjj0")("7a032942",i,!0,{})},aFLm:function(e,t,n){"use strict";function i(e){n("DZKb")}Object.defineProperty(t,"__esModule",{value:!0});var a=n("mvHQ"),o=n.n(a),r=n("YxJB"),s=n("0eEN"),c=(r.a,s.a,{name:"yhgl",components:{Flexbox:r.a,fhPopup:s.a},data:function(){return{popShow:!1,listHeight:0,userData:[],iUserData:{userId:"",nickName:"",createTime:""}}},methods:{onClickLeft:function(){this.$router?this.$router.back():window.history.back()},isCurUser:function(e){var t=JSON.parse(localStorage.getItem("userInfo"));return e.userId===t.userId?"当前使用":"--"},getUserList:function(){var e=this;this.$queryAll("user",function(t){e.userData=t.data.data,e.userData.sort(e.soryBy("createTime",!0))})},xinjian:function(){this.iUserData={userId:"",nickName:"",createTime:""};var e=(new Date).getTime();this.iUserData.createTime=e,this.iUserData.userId=this.$uuid(),this.popShow=!0},doAdd:function(){var e=this;this.$insert("user",this.iUserData,function(t){"0"===t.code?(e.$toast(e.$msgJson.all_doSucc),localStorage.setItem("userInfo",o()(e.iUserData)),e.popShow=!1,e.getUserList()):e.$toast(e.$msgJson.all_insertFail)})},soryBy:function(e,t){return function(n,i){var a=n[e],o=i[e];return void 0==t?a-o:t?a-o:o-a}},qiehuan:function(e){var t=this;this.$dialog.confirm({message:this.$msgJson.yhgl_changeUser}).then(function(){localStorage.setItem("userInfo",o()(e)),t.getUserList()}).catch(function(){})},shanchu:function(e){var t=this;this.$dialog.confirm({message:this.$msgJson.all_delConfirm}).then(function(){var n=e.userId;t.$delete_by_primaryKey("user",n,function(e){t.getUserList(),t.$delete_by_func("radar",function(e){return e.userId==n},function(e){console.log("radar----",e)}),t.$delete_by_func("radarScore",function(e){return e.userId==n},function(e){console.log("radarScore----",e)}),t.$delete_by_func("mission",function(e){return e.userId==n},function(e){console.log("mission----",e)}),t.$delete_by_func("reward",function(e){return e.userId==n},function(e){console.log("reward----",e)}),t.$delete_by_func("credit",function(e){return e.userId==n},function(e){console.log("credit----",e)})})}).catch(function(){})},xiugai:function(e){this.iUserData={userId:"",nickName:"",createTime:""},this.iUserData.createTime=e.createTime,this.iUserData.userId=e.userId,this.iUserData.nickName=e.nickName,this.popShow=!0}},mounted:function(){var e=window.innerHeight-48;this.listHeight=e,this.getUserList()}}),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("fh-nav-bar",{attrs:{title:"用户管理",lefttext:"返回",leftarrow:"",fixed:""},on:{"click-left":e.onClickLeft}}),e._v(" "),n("div",{staticClass:"listDiv",style:{height:e.listHeight+"px","overflow-y":"auto","background-color":"#ECECEC"},attrs:{id:"list"}},e._l(e.userData,function(t){return n("van-cell-group",{key:t.userId,staticClass:"group"},[n("van-cell",{attrs:{title:"用户昵称",value:t.nickName}}),e._v(" "),n("van-cell",{attrs:{title:"使用状态",value:e.isCurUser(t)}}),e._v(" "),n("van-cell",{attrs:{title:"创建时间",value:e._f("formatDate")(t.createTime)}}),e._v(" "),n("div",{staticClass:"opts"},[n("div",{directives:[{name:"show",rawName:"v-show",value:"--"===e.isCurUser(t),expression:"isCurUser(item) === '--'"}],staticClass:"optBtn",on:{click:function(n){return n.stopPropagation(),e.shanchu(t)}}},[e._v("删除用户")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"--"!==e.isCurUser(t),expression:"isCurUser(item) !== '--'"}],staticClass:"optBtn",on:{click:function(n){return n.stopPropagation(),e.xiugai(t)}}},[e._v("修改昵称")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"--"===e.isCurUser(t),expression:"isCurUser(item) === '--'"}],staticClass:"optBtn",on:{click:function(n){return n.stopPropagation(),e.qiehuan(t)}}},[e._v("切换用户")])])],1)}),1),e._v(" "),n("flexbox",{staticClass:"actions"},[n("button",{staticClass:"fh-theme-bgcolor",on:{click:e.xinjian}},[e._v("新建用户")])]),e._v(" "),n("fhPopup",{attrs:{height:"75%"},model:{value:e.popShow,callback:function(t){e.popShow=t},expression:"popShow"}},[n("div",{attrs:{slot:"title"},slot:"title"},[e._v("新建用户")]),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"divBotPad"},[n("van-field",{attrs:{clearable:"",maxlength:"10","show-word-limit":"",label:"我的昵称",placeholder:"请输入昵称"},model:{value:e.iUserData.nickName,callback:function(t){e.$set(e.iUserData,"nickName",t)},expression:"iUserData.nickName"}}),e._v(" "),n("span",{staticClass:"tips"},[e._v(e._s(this.$msgJson.wdnc_tips))])],1),e._v(" "),n("flexbox",{staticClass:"actions"},[n("button",{staticClass:"fh-theme-bgcolor",on:{click:e.doAdd}},[e._v("确认提交")])])],1)])],1)},u=[],d={render:l,staticRenderFns:u},f=d,v=n("VU/8"),m=i,h=v(c,f,!1,m,"data-v-be21bc90",null);t.default=h.exports}});