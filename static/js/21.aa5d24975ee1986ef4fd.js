webpackJsonp([21],{"+rvv":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.fh-list-boder[data-v-09855414] {\n  border-bottom: 0.026667rem solid #ebedf0;\n}\n.flex-auto[data-v-09855414] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n}\n.fh-list-left[data-v-09855414] {\n  -webkit-flex-shrink: 0;\n          flex-shrink: 0;\n  overflow: hidden;\n}\n.fh-left-icon[data-v-09855414] {\n  width: 0.266667rem;\n  height: 0.266667rem;\n  max-height: 3.04rem;\n  max-width: 4rem;\n}\n.fh-list-box[data-v-09855414] {\n  padding: 0.32rem 0.4rem;\n  background-color: #ffffff;\n}\n.fh-list-tip[data-v-09855414] {\n  font-size: 0.426667rem;\n  color: #333333;\n}\n.fh-list-tip-right[data-v-09855414] {\n  -webkit-flex-shrink: 0;\n          flex-shrink: 0;\n  color: #cccccc;\n}\n.fh-list-tip-right .van-tag[data-v-09855414] {\n  font-family: -webkit-pictograph;\n}\n\n/*.item-tag{*/\n\n/*.van-tag{*/\n\n/*display: inline-table;*/\n\n/*}*/\n\n/*}*/\n.fh-list-content[data-v-09855414] {\n  margin-top: 0.16rem;\n  font-size: 0.373333rem;\n  color: #999999;\n}\n.fh-list-content-tag[data-v-09855414] {\n  margin: 0.16rem 0.16rem 0 0;\n}\n.text-overflow[data-v-09855414] {\n  display: -webkit-box;\n  overflow: hidden;\n  /*!autoprefixer:off*/\n  -webkit-box-orient: vertical;\n}",""])},A3bL:function(t,e,a){"use strict";function i(t){a("JAn6")}var n=(String,String,String,String,Array,String,String,String,String,String,String,Boolean,Boolean,String,Boolean,{name:"fhLish",props:{imgFieidName:{type:String},contentFieidName:{type:String},titleFieidName:{type:String},titleBubbleTextFieidName:{type:String},listObj:{type:Array,default:function(){return[]}},titleFontSize:{default:16},titleColor:{type:String,default:"#666666"},titleLineClamp:{default:5},titleBubbleFontSize:{default:10},titleBubbleColor:{type:String,default:""},titleBubbleBg:{type:String,default:"#ee0a24 "},titleBubbleStyle:{type:String,default:"round"},contentFontSize:{default:14},contentColor:{type:String,default:"#999999"},contentLineClamp:{default:5},listStatusTagFz:{default:12},iconFit:{type:String,default:"cover"},iconWidth:{default:85},iconRadius:{default:5},leftIcon:{type:Boolean,default:!1},rightIcon:{type:Boolean,default:!1},iconHeight:{default:67},titleStatus:{type:String,default:""},isLink:{type:Boolean,default:!1}},data:function(){return{img:"",borderBtoom:"fh-list-boder"}},mounted:function(){},methods:{listClickHandle:function(t){this.$emit("itemClick",t)}}}),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.listObj,function(e,i){return a("div",{key:i,class:["fh-list-box","click-active",t.listObj.length>1?t.borderBtoom:""],on:{click:function(a){return t.listClickHandle(e)}}},[a("van-row",{attrs:{gutter:"4",align:"center",justify:"space-between",type:"flex"}},[a("van-col",{staticClass:"flex-auto"},[a("van-row",{attrs:{align:"top",gutter:t.iconWidth>0?15:0,type:"flex"}},[t.leftIcon&&!t.rightIcon?a("van-col",{staticClass:"fh-list-left"},[a("van-image",{staticClass:"fh-left-icon",style:{width:t.$rems(t.iconWidth)+"px",height:t.$rems(t.iconHeight)+"px"},attrs:{radius:t.iconRadius,fit:t.iconFit,"lazy-load":"",src:e[t.imgFieidName]},scopedSlots:t._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)})],1):t._e(),t._v(" "),a("van-col",{staticClass:"flex-auto"},[a("van-row",{attrs:{type:"flex",gutter:"14",align:"center",justify:"space-between"}},[a("van-col",{attrs:{span:"24"}},[a("van-row",{attrs:{type:"flex",gutter:"6",justify:"text"==t.titleStatus?"space-between":""}},[a("van-col",{staticClass:"fh-list-tip"},[a("span",{staticClass:"text-overflow",style:{fontSize:t.$rems(t.titleFontSize)+"px",color:""+t.titleColor,lineClamp:""+t.titleLineClamp}},[t._v("\n                      "+t._s(e[t.titleFieidName])+"\n                    ")])]),t._v(" "),t.titleStatus?a("van-col",{staticClass:"fh-list-tip-right",style:{color:""+t.titleBubbleColor}},["text"==t.titleStatus?a("span",{style:{fontSize:t.$rems(t.titleBubbleFontSize)+"px"}},[t._v("\n                      "+t._s(e[t.titleBubbleTextFieidName])+"\n                    ")]):"bubble"==t.titleStatus?a("van-tag",{style:{fontSize:t.$rems(t.titleBubbleFontSize)+"px"},attrs:{color:t.titleBubbleBg,"text-color":t.titleBubbleColor,round:"round"==t.titleBubbleStyle,mark:"mark"==t.titleBubbleStyle,plain:"plain"==t.titleBubbleStyle}},[a("span",{staticClass:"vant-tag-align-center"},[t._v("\n                        "+t._s(e[t.titleBubbleTextFieidName])+"\n                      ")])]):t._e()],1):t._e()],1),t._v(" "),e&&e.tagList?a("div",{staticClass:"item-tag"},t._l(e.tagList,function(e,i){return a("van-tag",{key:i,staticClass:"fh-list-content-tag",style:{fontSize:t.$rems(t.listStatusTagFz)+"px"},attrs:{color:e.listTagBg,"text-color":e.listTagColor,type:e.listTagType,round:"round"==e.listTagStyle,mark:"mark"==e.listTagStyle,plain:"plain"==e.listTagStyle}},[a("span",{staticClass:"vant-tag-align-center"},[t._v("\n                      "+t._s(e.text)+"\n                    ")])])}),1):t._e(),t._v(" "),e[t.contentFieidName]&&!e.tagList?a("div",{staticClass:"fh-list-content",style:{fontSize:t.$rems(t.contentFontSize)+"px",color:""+t.contentColor}},[a("div",{staticClass:"text-overflow",style:{lineClamp:""+t.contentLineClamp}},[t._v("\n                    "+t._s(e[t.contentFieidName])+"\n                  ")]),t._v(" "),t._t("labelContent",null,{data:e})],2):t._e()],1)],1)],1),t._v(" "),t.rightIcon&&!t.leftIcon?a("van-col",{staticClass:"fh-list-left"},[a("van-image",{staticClass:"fh-left-icon",style:{width:t.$rems(t.iconWidth)+"px",height:t.$rems(t.iconHeight)+"px"},attrs:{radius:t.iconRadius,fit:t.iconFit,"lazy-load":"",src:e[t.imgFieidName]},scopedSlots:t._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)})],1):t._e()],1)],1),t._v(" "),t.isLink?a("van-col",[a("van-icon",{attrs:{color:"#999999",size:"14",name:"arrow"}})],1):t._e()],1),t._v(" "),e[t.contentFieidName]&&e.tagList&&e.tagList.length>0?a("div",{staticClass:"fh-list-content",style:{fontSize:t.$rems(t.contentFontSize)+"px",color:""+t.contentColor}},[a("div",{staticClass:"text-overflow",style:{lineClamp:""+t.contentLineClamp}},[t._v("\n        "+t._s(e[t.contentFieidName])+"\n      ")]),t._v(" "),t._t("labelContent",null,{data:e})],2):t._e()],1)}),0)},o=[],l={render:s,staticRenderFns:o},r=l,c=a("VU/8"),d=i,u=c(n,r,!1,d,"data-v-09855414",null);e.a=u.exports},JAn6:function(t,e,a){var i=a("+rvv");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("d0d31b18",i,!0,{})},TiOh:function(t,e,a){var i=a("yUZi");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("ccdbcdd2",i,!0,{})},tv9T:function(t,e,a){"use strict";function i(t){a("TiOh")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("mvHQ"),s=a.n(n),o=a("YxJB"),l=a("0eEN"),r=a("A3bL"),c=a("Fiy/"),d=(o.a,l.a,r.a,c.a,{name:"jlgl",components:{Flexbox:o.a,fhPopup:l.a,fhList:r.a,fhImgWord:c.a},data:function(){return{popShow:!1,detailShow:!1,searchShow:!1,editShow:!1,evaluateShow:!1,listHeight:0,nodata:!1,idata:{rewardId:"",content:"",credit:"1",createTime:"",usedFlag:!1},listData:[],detailData:{},searchData:{keyword:"",status:[]},statusList:[{title:"启用中",value:!0},{title:"已停用",value:!1}],creditList:[],credit:0,curUserInfo:JSON.parse(localStorage.getItem("userInfo"))}},methods:{onClickLeft:function(){this.$router?this.$router.back():window.history.back()},onFilter:function(){this.searchShow=!0},xinjian:function(){this.idata={rewardId:"",content:"",credit:"1",createTime:"",usedFlag:!1,userId:this.curUserInfo.userId},this.popShow=!0},doAdd:function(){var t=this;if(0===this.idata.content.trim().length)return void this.$toast(this.$msgJson.all_needMust);var e=(new Date).getTime();this.idata.createTime=e,this.idata.rewardId=this.$uuid(),this.$insert("reward",this.idata,function(e){"0"===e.code?(t.$toast(t.$msgJson.all_doSucc),t.popShow=!1,t.getList()):t.$toast(t.$msgJson.all_insertFail)})},showDetail:function(t){var e=this;this.detailShow=!0,this.$query_by_primaryKey("reward",t,function(t){e.detailData=t.data.data})},doSearch:function(){this.searchShow=!1,this.getList()},doReset:function(){this.searchData.status=[]},bianji:function(t){this.idata=JSON.parse(s()(t)),this.editShow=!0},doEdit:function(){var t=this;if(0===this.idata.content.trim().length)return void this.$toast(this.$msgJson.all_needMust);this.$update_by_primaryKey("reward",this.idata.rewardId,function(e){return e.content=t.idata.content,e.credit=t.idata.credit,e.usedFlag=t.idata.usedFlag},function(e){t.editShow=!1,t.getList()})},shanchu:function(t){var e=this;this.$dialog.confirm({message:this.$msgJson.all_delConfirm}).then(function(){e.$delete_by_primaryKey("reward",t.rewardId,function(t){e.getList()})}).catch(function(){})},duihuan:function(t){var e=this;this.$dialog.confirm({message:this.$msgJson.reward_duihuanConfirm}).then(function(){e.getCreditList(t)}).catch(function(){})},getList:function(){var t=this;this.$query("reward",function(e){return e.userId==t.curUserInfo.userId&&-1!=e.content.indexOf(t.searchData.keyword.trim())&&(0===t.searchData.status.length||t.searchData.status.includes(e.usedFlag))},function(e){0===e.data.data.length?t.nodata=!0:(t.nodata=!1,t.listData=e.data.data,t.listData.sort(t.soryBy("createTime",!1)))})},soryBy:function(t,e){return function(a,i){var n=a[t],s=i[t];return void 0==e?n-s:e?n-s:s-n}},getCreditList:function(t){var e=this;this.credit=0,this.$query("credit",function(t){return t.userId==e.curUserInfo.userId},function(a){if(e.creditList=a.data.data,e.creditList.forEach(function(t){e.credit=e.credit+1*t.credit}),e.credit<t.credit)return void e.$toast(e.$msgJson.reward_needMore+t.credit+"积分");e.addCredit(t)})},addCredit:function(t){var e=this,a=(new Date).getTime(),i={creditId:this.$uuid(),resourceType:"奖励兑换",content:t.content,credit:-1*t.credit,createTime:a,userId:this.curUserInfo.userId};this.$insert("credit",i,function(a){"0"===a.code?e.$toast(e.$msgJson.jfgl_consumption+t.credit+"积分"):e.$toast(e.$msgJson.all_insertFail)})}},mounted:function(){var t=window.innerHeight-48-58-58;this.listHeight=t,this.getList()}}),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("fh-nav-bar",{attrs:{title:"奖励管理",lefttext:"返回",leftarrow:"",fixed:""},on:{"click-left":t.onClickLeft}}),t._v(" "),a("van-search",{staticClass:"myView",attrs:{"show-action":"",placeholder:this.$msgJson.all_keyword},on:{search:t.getList},model:{value:t.searchData.keyword,callback:function(e){t.$set(t.searchData,"keyword",e)},expression:"searchData.keyword"}},[a("div",{attrs:{slot:"action"},on:{click:t.onFilter},slot:"action"},[a("i",{staticClass:"aidicon aidicon-filter"})])]),t._v(" "),a("div",{staticClass:"listDiv",style:{height:t.listHeight+"px","overflow-y":"auto","background-color":"#ECECEC"},attrs:{id:"list"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.nodata,expression:"!nodata"}]},t._l(t.listData,function(e){return a("van-cell-group",{key:e.rewardId,staticClass:"group",on:{click:function(a){return t.showDetail(e.rewardId)}}},[a("van-cell",{attrs:{title:e.content,"title-class":"content"}}),t._v(" "),a("van-cell",{attrs:{title:"奖励状态",value:1==e.usedFlag?"启用中":"已停用","value-class":"status"}}),t._v(" "),a("van-cell",{attrs:{title:"消费积分",value:e.credit+"积分","value-class":"credit"}}),t._v(" "),a("div",{staticClass:"opts"},[a("div",{staticClass:"optBtn",on:{click:function(a){return a.stopPropagation(),t.bianji(e)}}},[t._v("编辑")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!0!==e.usedFlag,expression:"item.usedFlag !== true"}],staticClass:"optBtn",on:{click:function(a){return a.stopPropagation(),t.shanchu(e)}}},[t._v("删除")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.usedFlag,expression:"item.usedFlag === true"}],staticClass:"optBtn",on:{click:function(a){return a.stopPropagation(),t.duihuan(e)}}},[t._v("兑换")])])],1)}),1),t._v(" "),a("fhImgWord",{directives:[{name:"show",rawName:"v-show",value:t.nodata,expression:"nodata"}],attrs:{width:"144",height:"119"}})],1),t._v(" "),a("flexbox",{staticClass:"actions"},[a("button",{staticClass:"fh-theme-bgcolor",on:{click:t.xinjian}},[t._v("新建奖励")])]),t._v(" "),a("fhPopup",{attrs:{height:"75%"},model:{value:t.popShow,callback:function(e){t.popShow=e},expression:"popShow"}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("新建奖励")]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"divBotPad"},[a("van-field",{attrs:{label:"奖励内容",placeholder:this.$msgJson.reward_contentLabel,clearable:"",required:"",type:"textarea",rows:"3"},model:{value:t.idata.content,callback:function(e){t.$set(t.idata,"content",e)},expression:"idata.content"}}),t._v(" "),a("van-cell",{attrs:{center:"",title:"奖励积分",label:this.$msgJson.reward_creditLabel}},[a("van-stepper",{model:{value:t.idata.credit,callback:function(e){t.$set(t.idata,"credit",e)},expression:"idata.credit"}})],1),t._v(" "),a("van-cell",{attrs:{center:"",title:"启用状态",label:this.$msgJson.reward_usedFlagLabel}},[a("van-switch",{model:{value:t.idata.usedFlag,callback:function(e){t.$set(t.idata,"usedFlag",e)},expression:"idata.usedFlag"}})],1)],1),t._v(" "),a("flexbox",{staticClass:"actions"},[a("button",{staticClass:"fh-theme-bgcolor",on:{click:t.doAdd}},[t._v("确认提交")])])],1)]),t._v(" "),a("fhPopup",{attrs:{height:"75%"},model:{value:t.detailShow,callback:function(e){t.detailShow=e},expression:"detailShow"}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("奖励详情")]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"divBotPad"},[a("van-cell",{attrs:{title:"奖励内容",value:t.detailData.content}}),t._v(" "),a("van-cell",{attrs:{title:"消费积分",value:t.detailData.credit+"积分"}}),t._v(" "),a("van-cell",{attrs:{title:"奖励状态",value:1==t.detailData.usedFlag?"启用中":"已停用"}}),t._v(" "),a("van-cell",{attrs:{title:"创建时间",value:t._f("formatDate")(t.detailData.createTime)}})],1)])]),t._v(" "),a("fhPopup",{attrs:{height:"75%"},model:{value:t.searchShow,callback:function(e){t.searchShow=e},expression:"searchShow"}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("筛选")]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"divBotPad"},[a("van-cell",{attrs:{center:"",title:"奖励状态","title-class":"bold"}}),t._v(" "),a("van-checkbox-group",{model:{value:t.searchData.status,callback:function(e){t.$set(t.searchData,"status",e)},expression:"searchData.status"}},[a("van-cell-group",t._l(t.statusList,function(e,i){return a("van-cell",{key:i,attrs:{clickable:"",title:e.title},scopedSlots:t._u([{key:"right-icon",fn:function(){return[a("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{name:e.value}})]},proxy:!0}],null,!0)})}),1)],1)],1),t._v(" "),a("flexbox",{staticClass:"actions"},[a("button",{staticClass:"fh-theme-opacity",on:{click:t.doReset}},[t._v("重置")]),t._v(" "),a("button",{staticClass:"fh-theme-bgcolor",on:{click:t.doSearch}},[t._v("完成")])])],1)]),t._v(" "),a("fhPopup",{attrs:{height:"75%"},model:{value:t.editShow,callback:function(e){t.editShow=e},expression:"editShow"}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("编辑奖励")]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"divBotPad"},[a("van-field",{attrs:{label:"奖励内容",placeholder:this.$msgJson.reward_contentLabel,clearable:"",required:"",type:"textarea",rows:"3"},model:{value:t.idata.content,callback:function(e){t.$set(t.idata,"content",e)},expression:"idata.content"}}),t._v(" "),a("van-cell",{attrs:{center:"",title:"奖励积分",label:this.$msgJson.reward_creditLabel}},[a("van-stepper",{model:{value:t.idata.credit,callback:function(e){t.$set(t.idata,"credit",e)},expression:"idata.credit"}})],1),t._v(" "),a("van-cell",{attrs:{center:"",title:"启用状态",label:this.$msgJson.reward_usedFlagLabel}},[a("van-switch",{model:{value:t.idata.usedFlag,callback:function(e){t.$set(t.idata,"usedFlag",e)},expression:"idata.usedFlag"}})],1)],1),t._v(" "),a("flexbox",{staticClass:"actions"},[a("button",{staticClass:"fh-theme-bgcolor",on:{click:t.doEdit}},[t._v("确认提交")])])],1)])],1)},f=[],h={render:u,staticRenderFns:f},v=h,g=a("VU/8"),p=i,m=g(d,v,!1,p,"data-v-7b97d728",null);e.default=m.exports},yUZi:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.myView[data-v-7b97d728] {\n  margin-top: 1.333333rem;\n}\n.actions[data-v-7b97d728] {\n  height: 1.333333rem;\n  background: #fff;\n  position: fixed;\n  bottom: 0;\n}\nbutton[data-v-7b97d728] {\n  height: 14vw;\n  -webkit-box-flex: 1;\n  -webkit-flex: auto;\n          flex: auto;\n  color: #ffffff;\n  font-size: 0.453333rem;\n  font-weight: 400;\n  border: none;\n  outline: none;\n  margin-left: 0;\n}\n.divBotPad[data-v-7b97d728] {\n  padding-bottom: 1.6rem;\n}\n.bold[data-v-7b97d728] {\n  font-weight: bold;\n}\n.listDiv[data-v-7b97d728] {\n  padding-bottom: 0.213333rem;\n}\n.group[data-v-7b97d728] {\n  margin-top: 0.213333rem;\n}\n.content[data-v-7b97d728] {\n  font-size: 0.426667rem;\n  display: -webkit-box;\n  overflow: hidden;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 3;\n  text-overflow: ellipsis;\n  word-break: break-all;\n}\n\n/*  .status{\n    color: red;\n  }\n  .credit{\n    color: red;\n  }*/\n.opts[data-v-7b97d728] {\n  padding: 0.266667rem 0.426667rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n  -webkit-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n.optBtn[data-v-7b97d728] {\n  padding: 0.266667rem 0.266667rem;\n  border: solid 0.026667rem #0354A6;\n  text-align: center;\n  font-size: 0.373333rem;\n  color: #0354A6;\n  margin-left: 0.266667rem;\n}",""])}});